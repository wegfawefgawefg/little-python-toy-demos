from __future__ import annotations

_FONT_5X7 = {
    " ": ["00000", "00000", "00000", "00000", "00000", "00000", "00000"],
    ":": ["00000", "00100", "00100", "00000", "00100", "00100", "00000"],
    "0": ["01110", "10001", "10011", "10101", "11001", "10001", "01110"],
    "1": ["00100", "01100", "00100", "00100", "00100", "00100", "01110"],
    "2": ["01110", "10001", "00001", "00010", "00100", "01000", "11111"],
    "3": ["01110", "10001", "00001", "00110", "00001", "10001", "01110"],
    "4": ["00010", "00110", "01010", "10010", "11111", "00010", "00010"],
    "5": ["11111", "10000", "11110", "00001", "00001", "10001", "01110"],
    "6": ["00110", "01000", "10000", "11110", "10001", "10001", "01110"],
    "7": ["11111", "00001", "00010", "00100", "01000", "01000", "01000"],
    "8": ["01110", "10001", "10001", "01110", "10001", "10001", "01110"],
    "9": ["01110", "10001", "10001", "01111", "00001", "00010", "01100"],
    "F": ["11111", "10000", "10000", "11110", "10000", "10000", "10000"],
    "P": ["11110", "10001", "10001", "11110", "10000", "10000", "10000"],
    "R": ["11110", "10001", "10001", "11110", "10100", "10010", "10001"],
    "S": ["01111", "10000", "10000", "01110", "00001", "00001", "11110"],
    "V": ["10001", "10001", "10001", "10001", "10001", "01010", "00100"],
}


def _draw_text(prims, x: int, y: int, text: str, color: tuple[int, int, int], scale: int = 2) -> None:
    cursor_x = x
    for ch in text.upper():
        glyph = _FONT_5X7.get(ch, _FONT_5X7[" "])
        for row_idx, row in enumerate(glyph):
            for col_idx, cell in enumerate(row):
                if cell == "1":
                    px = cursor_x + col_idx * scale + scale / 2
                    py = y + row_idx * scale + scale / 2
                    prims.rect_center(px, py, scale, color)
        cursor_x += 6 * scale


def draw_status(prims, fps: float, view_radius: int) -> None:
    fps_label = f"FPS:{int(round(fps)):3d}"
    vr_label = f"VR:{int(view_radius):2d}"
    _draw_text(prims, 8, 8, fps_label, (255, 255, 255), scale=2)
    _draw_text(prims, 8, 26, vr_label, (255, 255, 255), scale=2)
